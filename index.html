<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VC Ã— Jarvis å°ˆæ¡ˆç¥ç¶“ç¶²è·¯æ§åˆ¶å°</title>
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <style>
    :root {
      --bg-0: #060a13;
      --bg-1: #0a1222;
      --bg-2: #0d1c33;
      --panel: rgba(11, 19, 36, 0.78);
      --line: rgba(158, 196, 255, 0.2);
      --line-strong: rgba(122, 181, 255, 0.45);
      --text: #eaf3ff;
      --text-dim: #9db1cd;
      --cyan: #00d4ff;
      --blue: #4f86ff;
      --teal: #2cf7d6;
      --green: #3dff89;
      --amber: #ffcc66;
      --orange: #ff8b5a;
      --pink: #ff6edc;
      --violet: #8f7dff;
      --danger: #ff6363;
      --radius: 18px;
      --shadow: 0 20px 60px rgba(0, 0, 0, 0.45);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", sans-serif;
      color: var(--text);
      background:
        radial-gradient(circle at 12% 10%, rgba(30, 94, 190, 0.28), transparent 28%),
        radial-gradient(circle at 90% 20%, rgba(13, 210, 255, 0.18), transparent 30%),
        radial-gradient(circle at 80% 90%, rgba(130, 52, 210, 0.15), transparent 28%),
        linear-gradient(145deg, var(--bg-0), var(--bg-1) 45%, var(--bg-2));
      overflow: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(255,255,255,0.04) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.04) 1px, transparent 1px);
      background-size: 40px 40px;
      mask-image: radial-gradient(circle at 50% 45%, black 25%, transparent 85%);
      pointer-events: none;
      opacity: 0.35;
    }

    .dashboard {
      position: relative;
      display: grid;
      grid-template-columns: 1fr 340px;
      grid-template-rows: auto auto 1fr;
      gap: 16px;
      height: 100vh;
      padding: 18px;
    }

    .glass {
      background: var(--panel);
      border: 1px solid rgba(131, 182, 255, 0.18);
      border-radius: var(--radius);
      box-shadow: var(--shadow), inset 0 1px 0 rgba(255,255,255,0.04);
      backdrop-filter: blur(8px);
    }

    .header {
      grid-column: 1 / -1;
      padding: 14px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      position: relative;
      overflow: hidden;
    }

    .header::after {
      content: "";
      position: absolute;
      right: -20%;
      width: 50%;
      height: 180%;
      background: linear-gradient(90deg, transparent, rgba(124, 210, 255, 0.25), transparent);
      transform: rotate(10deg);
      animation: scan 6s linear infinite;
      pointer-events: none;
    }

    @keyframes scan {
      from { transform: translateX(0) rotate(10deg); }
      to { transform: translateX(-220%) rotate(10deg); }
    }

    .title-wrap h1 {
      margin: 0;
      font-size: clamp(1.1rem, 2.4vw, 1.7rem);
      letter-spacing: 0.03em;
      text-shadow: 0 0 14px rgba(79, 134, 255, 0.5);
    }

    .title-wrap p {
      margin: 5px 0 0;
      color: var(--text-dim);
      font-size: 0.9rem;
    }

    .status-capsule {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
      z-index: 1;
    }

    .capsule {
      background: rgba(12, 27, 53, 0.7);
      border: 1px solid rgba(142, 196, 255, 0.2);
      border-radius: 999px;
      padding: 7px 12px;
      font-size: 0.8rem;
      color: var(--text-dim);
      white-space: nowrap;
    }

    .capsule strong {
      color: var(--text);
      margin-left: 6px;
    }

    .stats-panel {
      grid-column: 1 / 2;
      padding: 14px 16px;
      display: grid;
      grid-template-columns: repeat(4, minmax(120px, 1fr));
      gap: 12px;
      align-items: stretch;
    }

    .metric {
      background: linear-gradient(170deg, rgba(24, 42, 71, 0.72), rgba(9, 18, 36, 0.5));
      border: 1px solid rgba(120, 180, 255, 0.2);
      border-radius: 14px;
      padding: 10px 12px;
      min-height: 84px;
      position: relative;
      overflow: hidden;
    }

    .metric::before {
      content: "";
      position: absolute;
      inset: auto -20% -45% -20%;
      height: 80%;
      background: radial-gradient(circle, rgba(0, 212, 255, 0.22), transparent 60%);
      pointer-events: none;
    }

    .metric .label {
      color: var(--text-dim);
      font-size: 0.78rem;
      letter-spacing: 0.04em;
      margin-bottom: 6px;
    }

    .metric .value {
      font-size: 1.45rem;
      font-weight: 700;
      line-height: 1;
    }

    .metric .sub {
      margin-top: 6px;
      font-size: 0.78rem;
      color: #8bb0dc;
    }

    .bar-card {
      grid-column: span 2;
      background: linear-gradient(165deg, rgba(20, 34, 60, 0.7), rgba(8, 15, 28, 0.65));
      border: 1px solid rgba(102, 165, 251, 0.25);
      border-radius: 14px;
      padding: 10px 12px;
      min-height: 84px;
    }

    .bar-title {
      margin: 0 0 8px;
      font-size: 0.8rem;
      color: var(--text-dim);
    }

    .bars {
      display: grid;
      gap: 7px;
    }

    .bar-row {
      display: grid;
      grid-template-columns: 58px 1fr 38px;
      align-items: center;
      gap: 8px;
      font-size: 0.78rem;
    }

    .bar-track {
      position: relative;
      height: 8px;
      background: rgba(130, 174, 238, 0.12);
      border-radius: 99px;
      overflow: hidden;
    }

    .bar-fill {
      position: absolute;
      inset: 0 auto 0 0;
      width: 0;
      border-radius: inherit;
      box-shadow: 0 0 14px currentColor;
      animation: growBar 1.3s ease forwards;
    }

    @keyframes growBar {
      from { width: 0; }
      to { width: var(--w); }
    }

    .graph-card {
      grid-column: 1 / 2;
      grid-row: 3 / 4;
      position: relative;
      overflow: hidden;
    }

    .graph-toolbar {
      position: absolute;
      top: 12px;
      left: 12px;
      z-index: 3;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .chip {
      border: 1px solid rgba(145, 198, 255, 0.3);
      background: rgba(5, 19, 41, 0.76);
      color: var(--text-dim);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 0.75rem;
      cursor: pointer;
      transition: all 0.2s ease;
      user-select: none;
    }

    .chip.active,
    .chip:hover {
      color: var(--text);
      border-color: rgba(144, 240, 255, 0.6);
      box-shadow: 0 0 14px rgba(0, 212, 255, 0.28);
      transform: translateY(-1px);
    }

    #graph {
      width: 100%;
      height: 100%;
      min-height: 400px;
    }

    .legend {
      position: absolute;
      right: 12px;
      bottom: 12px;
      z-index: 3;
      background: rgba(7, 20, 40, 0.75);
      border: 1px solid rgba(131, 189, 255, 0.24);
      border-radius: 12px;
      padding: 10px;
      display: grid;
      gap: 6px;
      font-size: 0.74rem;
      color: var(--text-dim);
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      box-shadow: 0 0 9px currentColor;
    }

    .sidebar {
      grid-column: 2 / 3;
      grid-row: 2 / 4;
      padding: 16px;
      overflow: auto;
      position: relative;
    }

    .sidebar h2 {
      margin: 0;
      font-size: 1.1rem;
      letter-spacing: 0.02em;
    }

    .status-badge {
      display: inline-block;
      margin-top: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.74rem;
      border: 1px solid rgba(141, 199, 255, 0.35);
      background: rgba(14, 36, 62, 0.75);
      color: #cce6ff;
    }

    .section-title {
      margin: 16px 0 8px;
      font-size: 0.8rem;
      color: var(--text-dim);
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .desc {
      margin: 10px 0 0;
      color: #dcecff;
      line-height: 1.55;
      font-size: 0.9rem;
    }

    .kv {
      margin: 0;
      padding: 0;
      list-style: none;
      display: grid;
      gap: 8px;
    }

    .kv li {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      font-size: 0.84rem;
      color: #cde4ff;
      padding-bottom: 6px;
      border-bottom: 1px dashed rgba(128, 176, 243, 0.18);
    }

    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 7px;
    }

    .tag {
      padding: 5px 10px;
      border-radius: 999px;
      font-size: 0.75rem;
      border: 1px solid rgba(147, 209, 255, 0.28);
      background: rgba(12, 31, 56, 0.8);
      color: #d9eeff;
    }

    .link-btn {
      display: inline-flex;
      margin-top: 10px;
      text-decoration: none;
      color: #071322;
      font-weight: 700;
      font-size: 0.82rem;
      padding: 8px 12px;
      background: linear-gradient(135deg, #7ce2ff, #7df8ce);
      border-radius: 10px;
      box-shadow: 0 0 18px rgba(48, 230, 255, 0.35);
    }

    .hint {
      color: #9bb8da;
      font-size: 0.82rem;
      margin-top: 8px;
    }

    .tooltip {
      position: fixed;
      pointer-events: none;
      background: rgba(9, 22, 44, 0.95);
      border: 1px solid rgba(140, 196, 255, 0.32);
      color: #dbedff;
      font-size: 0.78rem;
      border-radius: 10px;
      padding: 7px 9px;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 0.2s ease, transform 0.2s ease;
      max-width: 220px;
      z-index: 10;
      line-height: 1.45;
    }

    @media (max-width: 1120px) {
      body { overflow: auto; }
      .dashboard {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto minmax(420px, 60vh) auto;
        height: auto;
        min-height: 100vh;
      }

      .stats-panel { grid-column: 1 / 2; }
      .graph-card { grid-row: 3 / 4; }
      .sidebar {
        grid-column: 1 / 2;
        grid-row: 4 / 5;
        max-height: none;
      }
    }

    @media (max-width: 760px) {
      .dashboard { padding: 12px; gap: 12px; }
      .header { flex-direction: column; align-items: flex-start; }
      .status-capsule { justify-content: flex-start; }
      .stats-panel {
        grid-template-columns: 1fr 1fr;
      }
      .bar-card { grid-column: 1 / -1; }
      .legend { display: none; }
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <header class="header glass">
      <div class="title-wrap">
        <h1>VC Ã— Jarvis å°ˆæ¡ˆç¥ç¶“ç¶²è·¯æ§åˆ¶å°</h1>
        <p>æ•´é«”çŸ¥è­˜ç®¡ç†èˆ‡å°ˆæ¡ˆé«”ç³»å³æ™‚å¯è¦–åŒ– ï½œ é»æ“Šç¯€é»æŸ¥çœ‹è©³ç´°è³‡è¨Š</p>
      </div>
      <div class="status-capsule" id="capsules"></div>
    </header>

    <section class="stats-panel glass" id="statsPanel">
      <article class="metric">
        <div class="label">ç¸½ç¯€é»æ•¸</div>
        <div class="value" id="nodeCount">0</div>
        <div class="sub">å°ˆæ¡ˆ + å­ä»»å‹™ + çŸ¥è­˜é«”ç³» + åŸºç¤è¨­æ–½</div>
      </article>
      <article class="metric">
        <div class="label">æ ¸å¿ƒå°ˆæ¡ˆ</div>
        <div class="value" id="projectCount">0</div>
        <div class="sub">ä¸€åœˆä¸»ç¯€é»</div>
      </article>
      <article class="metric">
        <div class="label">é‹è¡Œç‹€æ…‹</div>
        <div class="value" id="activeCount">0</div>
        <div class="sub">é€²è¡Œä¸­ + æŒçºŒæ“´å…… + ç©©å®šé‹è¡Œ</div>
      </article>
      <article class="bar-card">
        <h3 class="bar-title">å°ˆæ¡ˆç‹€æ…‹åˆ†ä½ˆ</h3>
        <div class="bars" id="statusBars"></div>
      </article>
    </section>

    <section class="graph-card glass">
      <div class="graph-toolbar" id="filters"></div>
      <svg id="graph" aria-label="å°ˆæ¡ˆåŠ›å°å‘åœ–"></svg>
      <div class="legend" id="legend"></div>
    </section>

    <aside class="sidebar glass" id="sidebar"></aside>
  </div>

  <div class="tooltip" id="tooltip"></div>

  <script>
    const palette = {
      center: "#00d4ff",
      category: "#ff9b66",
      project: "#5f9aff",
      infra: "#b487ff"
    };

    const nodes = [
      // === ä¸­å¿ƒ ===
      {
        id: "core", name: "VC Ã— Jarvis", layer: "center", group: "ä¸­å¿ƒ", status: "æ ¸å¿ƒ",
        desc: "ä»¥ OpenClaw ç‚ºæ ¸å¿ƒçš„ AI ç®¡å®¶ç³»çµ±ï¼Œä¸²èµ·æŠ•è³‡ã€é†«å­¸ã€è‡ªå‹•åŒ–ä¸‰å¤§é ˜åŸŸã€‚",
        importance: 42,
        metrics: { "å°ˆæ¡ˆ": "10 å€‹é¢å‘", "çŸ¥è­˜åº«": "3 å¤§é ˜åŸŸ", "åŸºç¤è¨­æ–½": "6 é …" },
        tags: ["OpenClaw", "Jarvis", "Obsidian", "æ•´é«”å”åŒ"]
      },

      // === åˆ†é¡å±¤ï¼ˆå°æ‡‰ Obsidian é ‚å±¤è³‡æ–™å¤¾ï¼‰===
      {
        id: "cat_trade", name: "ğŸ“ˆ äº¤æ˜“", layer: "category", group: "åˆ†é¡", status: "æ´»èº",
        desc: "é‡åŒ–äº¤æ˜“ã€è™›æ“¬è²¨å¹£ã€ä¸»å‹•äº¤æ˜“â€”â€”æ‰€æœ‰è·ŸæŠ•è³‡ç›¸é—œçš„å°ˆæ¡ˆéƒ½åœ¨é€™ã€‚",
        importance: 30,
        metrics: { "å­å°ˆæ¡ˆ": "4", "Obsidian è·¯å¾‘": "äº¤æ˜“/" },
        tags: ["é‡åŒ–äº¤æ˜“", "è™›æ“¬è²¨å¹£", "ä¸»å‹•äº¤æ˜“"],
        children: ["äº¤æ˜“è–ç¶“ (V2â†’V11 Transformer è¿­ä»£)", "è‡ªå‹•ä¸‹å–®ç³»çµ±", "Bitfinex è‡ªå‹•æ”¾è²¸", "Telegram Signal Bot", "Polymarket å¥—åˆ©"]
      },
      {
        id: "cat_med", name: "ğŸ©º é†«å­¸", layer: "category", group: "åˆ†é¡", status: "æ´»èº",
        desc: "æ€¥è¨ºè¶…éŸ³æ³¢ã€çš®è†šç§‘ã€é†«ç¾ã€EBMâ€”â€”è‡¨åºŠçŸ¥è­˜çš„ç³»çµ±åŒ–æ•´ç†ã€‚",
        importance: 28,
        metrics: { "å­é ˜åŸŸ": "4", "Obsidian è·¯å¾‘": "é†«å­¸/" },
        tags: ["æ€¥è¨º", "è¶…éŸ³æ³¢", "çš®è†šç§‘", "é†«ç¾", "EBM"],
        children: ["Obsidian çŸ¥è­˜åº«æ“´å……", "æ€¥è¨ºæµç¨‹ç­†è¨˜", "çš®è†šç§‘ç”¨è—¥", "é†«ç¾ä»¿å–®èˆ‡æŠ€å·§"]
      },
      {
        id: "cat_ai", name: "ğŸ¤– AI å·¥å…·èˆ‡é–‹ç™¼", layer: "category", group: "åˆ†é¡", status: "æ´»èº",
        desc: "OpenClawã€Claudeã€è‡ªå‹•åŒ–å·¥ä½œæµã€AI é–‹ç™¼æŠ€å·§â€”â€”æ‰€æœ‰ AI ç›¸é—œçŸ¥è­˜èˆ‡å·¥å…·ã€‚",
        importance: 26,
        metrics: { "å­é ˜åŸŸ": "4", "Obsidian è·¯å¾‘": "AIå·¥å…·èˆ‡é–‹ç™¼/" },
        tags: ["OpenClaw", "Claude", "è‡ªå‹•åŒ–", "Coding Agent"],
        children: ["OpenClaw èˆ‡ Claude ç³»åˆ—ç­†è¨˜", "AI é–‹ç™¼æŠ€å·§", "è‡ªå‹•åŒ–å·¥ä½œæµ", "Apple Notes ç²¾ç…‰"]
      },
      {
        id: "cat_content", name: "ğŸ“± å…§å®¹èˆ‡åˆ†äº«", layer: "category", group: "åˆ†é¡", status: "æ´»èº",
        desc: "IG é†«ç¾ç²‰å°ˆã€é¤Šè¦å¿ƒå¾—æ¼”è¬›ã€GitHub Pages åˆ†äº«ç«™â€”â€”å°å¤–è¼¸å‡ºçš„ç®¡é“ã€‚",
        importance: 22,
        metrics: { "å­å°ˆæ¡ˆ": "3", "Obsidian è·¯å¾‘": "é†«ç¾ç²‰å°ˆ/ + æŠ€è¡“ç­†è¨˜/é¤Šè¦å¿ƒå¾—/" },
        tags: ["IG", "æ¼”è¬›", "GitHub Pages"],
        children: ["IG é†«ç¾ç²‰å°ˆ (9 ä¸»é¡Œåº«å­˜)", "é¤Šè¦å¿ƒå¾—æ¼”è¬›ç´ æ", "RUSH Exam åˆ†äº«ç«™"]
      },

      // === æ ¸å¿ƒå°ˆæ¡ˆï¼ˆæ›åœ¨åˆ†é¡ä¸‹ï¼‰===
      {
        id: "trade_bible", name: "äº¤æ˜“è–ç¶“", layer: "project", group: "äº¤æ˜“",
        link: "#",
        status: "ğŸ”„ V11 è¨“ç·´ä¸­ï¼ŒV9b ä»æ˜¯åŸºæº–",
        desc: "Transformer é‡åŒ–ç­–ç•¥ï¼ŒV9b-Ens5 ä»æ˜¯åŸºæº–ï¼ˆCAGR 154.5%ï¼‰ï¼›V11 æ¶æ§‹å‡ç´šè¨“ç·´ä¸­ï¼ˆd128/h8/L6ï¼Œ37 å› å­ï¼‰ã€‚V10 ä¸ä¸Šç·šã€‚",
        importance: 28,
        metrics: { "è¿­ä»£": "V2 â†’ V11", "æœ€ä½³ç‰ˆæœ¬": "V9b-Ens5 (CAGR 154.5%, Sharpe 2.39, MDD -27.5%)", "V11 é€²åº¦": "V11a s42 å›æ¸¬å®Œæˆ (96.6%/1.90/-39.4%)", "æ–¹æ³•": "Transformer + FinLab å›æ¸¬" },
        tags: ["FinLab", "Transformer", "GPU è¨“ç·´"],
        children: ["V9b-Ens5ï¼ˆç¾åŸºæº–ï¼Œèƒƒç´é‡ 79 è¬ï¼‰", "V11a s42 å›æ¸¬å®Œæˆï¼ˆèƒƒç´é‡ 127 è¬ï¼‰", "V11 s123 è¨“ç·´ä¸­", "V10 ä¸‰è·¯å¯¦é©—ï¼ˆä¸ä¸Šç·šï¼‰", "Phase 3 ç­–ç•¥å„ªåŒ–å¾…åš"]
      },
      {
        id: "trading_system", name: "ç„¡æ¥µå‹•èƒ½å¿ƒæ³• è‡ªå‹•ä¸‹å–®", layer: "project", group: "äº¤æ˜“",
        status: "âœ… é‹è¡Œä¸­",
        desc: "æ°¸è± Shioaji + FinLab G6 å¤šé€±æœŸå‹•èƒ½ç­–ç•¥ï¼Œæ¯æ—¥ 22:00 è‡ªå‹•åŸ·è¡Œã€‚å·²åŠ  order_dedup é˜²é€£å‡é‡è¤‡ä¸‹å–®ã€‚",
        importance: 18,
        metrics: { "ç­–ç•¥": "G6 å¤šé€±æœŸå‹•èƒ½", "è³‡é‡‘": "å·²é…ç½®", "æ’ç¨‹": "launchd 22:00", "å„€è¡¨æ¿": "å…§éƒ¨" },
        tags: ["Shioaji", "FinLab", "launchd", "é›¶è‚¡"],
        children: ["è£œå–®é‚è¼¯ï¼ˆbuy-onlyï¼‰", "æ›è‚¡é‚è¼¯ï¼ˆrotationï¼‰", "è­¦ç¤ºè‚¡é¢¨æ§", "Telegram é€šçŸ¥", "order_dedup é˜²é‡è¤‡ä¸‹å–®"]
      },
      {
        id: "bitfinex", name: "Bitfinex è‡ªå‹•æ”¾è²¸", layer: "project", group: "äº¤æ˜“",
        status: "ğŸŸ¢ Live é‹è¡Œä¸­",
        desc: "è‡ªå»º Python è‡ªå‹•æ”¾è²¸æ©Ÿå™¨äººï¼Œå·²ä¸Šç·šé‹è¡Œã€‚AdaptivePeriod ç­–ç•¥é‹è¡Œä¸­ã€‚",
        importance: 17,
        metrics: { "ç‹€æ…‹": "Live é‹è¡Œä¸­", "è³‡é‡‘": "USDT å·²éƒ¨ç½²", "ç­–ç•¥": "AdaptivePeriod", "å„€è¡¨æ¿": "å…§éƒ¨" },
        tags: ["Python", "é¢¨æ§", "è¢«å‹•æ”¶å…¥"]
      },
      {
        id: "poly", name: "Polymarket å¥—åˆ©", layer: "project", group: "äº¤æ˜“",
        status: "ğŸ“‹ è¨ˆåŠƒéšæ®µ",
        desc: "çµ„åˆé‚è¼¯å¥—åˆ©ç­–ç•¥ï¼Œåœ¨é æ¸¬å¸‚å ´å°‹æ‰¾å®šåƒ¹éŒ¯èª¤ã€‚",
        importance: 13,
        metrics: { "æ¨¡å¼": "çµ„åˆå¥—åˆ©", "éšæ®µ": "ç ”ç©¶" },
        tags: ["å¥—åˆ©", "äº‹ä»¶å¸‚å ´"]
      },
      {
        id: "pocus", name: "Obsidian çŸ¥è­˜åº«æ“´å……", layer: "project", group: "é†«å­¸",
        status: "ğŸ”„ æŒçºŒæ“´å……",
        desc: "ç¶²é /PDF çˆ¬å– â†’ ä¸­è‹±å°ç…§ Obsidian ç­†è¨˜ã€‚æ¶µè“‹ POCUSã€é†«ç¾ã€äº¤æ˜“ç­‰é ˜åŸŸã€‚",
        importance: 24,
        metrics: { "POCUS": "7/20+ ä¸»é¡Œ", "é†«ç¾": "ç»å°¿é…¸/æ‹‰æ/æ³¨å°„", "æŠ€èƒ½": "knowledge-to-obsidian / pdf-to-obsidian" },
        tags: ["çŸ¥è­˜çˆ¬å–", "Obsidian", "ä¸­è‹±å°ç…§"],
        link: "https://drvictorchen.github.io/rush-exam/",
        children: ["âœ… POCUS è¶…éŸ³æ³¢ (7 ä¸»é¡Œ)", "âœ… é†«ç¾æ³¨å°„ç­†è¨˜", "âœ… ç»å°¿é…¸å“ç‰Œæ•´ç†", "âœ… æ‹‰ææ–‡ç»", "â³ æŒçºŒçˆ¬å–æ–°ä¸»é¡Œ"]
      },
      {
        id: "ig_med", name: "IG é†«ç¾ç²‰å°ˆ", layer: "project", group: "å…§å®¹",
        status: "ğŸ”„ é€²è¡Œä¸­",
        desc: "ç¶“ç‡Ÿ Instagram é†«ç¾å¸³è™Ÿï¼Œå®šæœŸç™¼åœ–æ–‡å…§å®¹å°æµæœ¬æ¥­ã€‚",
        importance: 20,
        metrics: { "è²¼æ–‡åº«": "9 ä¸»é¡Œ", "å·²ç™¼": "1", "ä¸²æ¥": "Meta API" },
        tags: ["å…§å®¹è¡ŒéŠ·", "è‡ªå‹•ç™¼æ–‡"],
        children: ["çš®ç§’é›·å°„ï¼ˆå·²ç™¼ï¼‰", "ç»å°¿é…¸ã€è‚‰æ¯’ã€é›»æ³¢ç­‰ 8 ç¯‡å¾…å¯©", "Meta API è‡ªå‹•æ’ç¨‹ä¸²æ¥ä¸­"]
      },
      {
        id: "apple_notes", name: "Apple Notes ç²¾ç…‰", layer: "project", group: "AIå·¥å…·",
        status: "âœ… ç©©å®šé‹è¡Œ",
        desc: "Apple Notes â†’ Obsidian è‡ªå‹•ç²¾ç…‰ï¼Œæ¯æ™š 22:30 åŸ·è¡Œã€‚",
        importance: 18,
        metrics: { "æµç¨‹": "JXA â†’ AI ç²¾ç…‰ â†’ Obsidian", "åŠŸèƒ½": "#todo åµæ¸¬" },
        tags: ["çŸ¥è­˜ç²¾ç…‰", "è‡ªå‹•åŒ–", "æ’ç¨‹"]
      },
      {
        id: "speech", name: "é¤Šè¦å¿ƒå¾—ï¼ˆæ¼”è¬›ï¼‰", layer: "project", group: "å…§å®¹",
        status: "âœ… æ¼”è¬›ç´ æå®Œæˆ",
        desc: "ä½¿ç”¨ AI ç®¡å®¶çš„å¯¦æˆ°ç¶“é©—æ¼”è¬›åˆ†äº«ï¼Œå« Reveal.js äº’å‹•ç°¡å ±ã€‚",
        importance: 15,
        metrics: { "ç¯‡å¹…": "å¿ƒè·¯æ­·ç¨‹ + è¦–è¦ºåŒ– + AWS æŒ‡å—", "ç°¡å ±": "Reveal.js äº’å‹•ç°¡å ±", "é¢¨æ ¼": "é›¶ç¨‹å¼èƒŒæ™¯ä¹Ÿçœ‹å¾—æ‡‚" },
        tags: ["æ¼”è¬›", "OpenClaw", "ç¶“é©—åˆ†äº«", "Reveal.js"]
      },


      {
        id: "signal_bot", name: "Telegram Signal Bot", layer: "project", group: "äº¤æ˜“",
        status: "âœ… ç©©å®šé‹è¡Œ",
        desc: "æ¯æ—¥ 21:00 è‡ªå‹•æ›´æ–°äº¤æ˜“è¨Šè™Ÿï¼Œæ”¯æ´ /refresh æ‰‹å‹•è§¸ç™¼ï¼ŒGitHub Pages å…¬é–‹é é¢ã€‚",
        importance: 16,
        metrics: { "æ’ç¨‹": "æ¯æ—¥ 21:00 è‡ªå‹• refresh", "ä»‹é¢": "/refresh æŒ‡ä»¤", "å…¬é–‹": "GitHub Pages" },
        tags: ["Telegram", "Signal", "è‡ªå‹•åŒ–", "GitHub Pages"]
      },
      {
        id: "rdog", name: "RDOG Skill", layer: "project", group: "AIå·¥å…·",
        status: "âœ… v1.0 å®šç‰ˆ",
        desc: "ä½é™¢é†«å¸« Journal Reading åŠ©æ‰‹ï¼Œè‡ªå‹•ç”Ÿæˆ Obsidian ç­†è¨˜ + è‹±æ–‡ç°¡å ±ï¼ˆPPT + HTMLï¼‰ã€‚",
        importance: 17,
        metrics: { "ç‰ˆæœ¬": "v1.0", "æµç¨‹": "/rdog URL â†’ Obsidian ç­†è¨˜ â†’ è‹±æ–‡ç°¡å ±" },
        tags: ["OpenClaw", "Skill", "é†«å­¸", "ç°¡å ±"]
      },
      // === åŸºç¤è¨­æ–½ ===
      { id: "macmini", name: "Mac mini", layer: "infra", group: "åŸºç¤è¨­æ–½", status: "é‹è¡Œä¸­", desc: "å›æ¸¬é‹ç®— + å ±å‘Šä¼ºæœå™¨ + æ—¥å¸¸é–‹ç™¼", importance: 14, tags: ["æœ¬åœ°é‹ç®—"] },
      { id: "win4060", name: "Windows GPU ä¸»æ©Ÿ", layer: "infra", group: "åŸºç¤è¨­æ–½", status: "é‹è¡Œä¸­", desc: "RTX é¡¯å¡ï¼Œæ·±åº¦å­¸ç¿’è¨“ç·´å°ˆç”¨", importance: 14, tags: ["GPU è¨“ç·´"] },
      { id: "openclaw", name: "OpenClaw (Jarvis)", layer: "infra", group: "åŸºç¤è¨­æ–½", status: "é‹è¡Œä¸­", desc: "AI ç®¡å®¶æ ¸å¿ƒï¼Œä¸²æ¥æ‰€æœ‰æµç¨‹èˆ‡é€šè¨Š", importance: 16, tags: ["AI ç®¡å®¶"] },
      { id: "obsidian", name: "Obsidian çŸ¥è­˜åº«", layer: "infra", group: "åŸºç¤è¨­æ–½", status: "é‹è¡Œä¸­", desc: "æ‰€æœ‰å°ˆæ¡ˆçš„çŸ¥è­˜æ²‰æ¾±çµ‚é»ï¼šç­†è¨˜ã€MOCã€å„€è¡¨æ¿", importance: 15, tags: ["ç¬¬äºŒå¤§è…¦"] },
      { id: "telegram", name: "Telegram", layer: "infra", group: "åŸºç¤è¨­æ–½", status: "é‹è¡Œä¸­", desc: "äººæ©Ÿæºé€šä¸»ä»‹é¢", importance: 12, tags: ["é€šè¨Š"] },
      { id: "github", name: "GitHub", layer: "infra", group: "åŸºç¤è¨­æ–½", status: "é‹è¡Œä¸­", desc: "ç¨‹å¼ç¢¼è¨—ç®¡ + Pages å…¬é–‹åˆ†äº«", importance: 13, tags: ["ç‰ˆæœ¬ç®¡ç†", "Pages"] }
    ];

    const links = [
      // ä¸­å¿ƒ â†’ åˆ†é¡
      ...["cat_trade", "cat_med", "cat_ai", "cat_content"].map(id => ({ source: "core", target: id, strength: 0.7 })),

      // ä¸­å¿ƒ â†’ åŸºç¤è¨­æ–½
      ...["macmini", "win4060", "openclaw", "obsidian", "telegram", "github"].map(id => ({ source: "core", target: id, strength: 0.45 })),

      // åˆ†é¡ â†’ å°ˆæ¡ˆ
      { source: "cat_trade", target: "trade_bible", strength: 0.6 },
      { source: "cat_trade", target: "trading_system", strength: 0.5 },
      { source: "cat_trade", target: "bitfinex", strength: 0.5 },
      { source: "cat_trade", target: "poly", strength: 0.4 },

      { source: "cat_med", target: "pocus", strength: 0.6 },

      { source: "cat_ai", target: "apple_notes", strength: 0.5 },

      { source: "cat_content", target: "ig_med", strength: 0.55 },
      { source: "cat_content", target: "speech", strength: 0.5 },
      { source: "cat_content", target: "pocus", strength: 0.35 },

      // å°ˆæ¡ˆ â†’ åŸºç¤è¨­æ–½ï¼ˆå¯¦éš›ä½¿ç”¨é—œä¿‚ï¼‰
      { source: "trade_bible", target: "macmini", strength: 0.3 },
      { source: "trade_bible", target: "win4060", strength: 0.3 },
      { source: "pocus", target: "obsidian", strength: 0.35 },
      { source: "pocus", target: "github", strength: 0.3 },
      { source: "apple_notes", target: "obsidian", strength: 0.35 },
      { source: "ig_med", target: "github", strength: 0.25 },
      { source: "speech", target: "obsidian", strength: 0.3 },
      { source: "openclaw", target: "telegram", strength: 0.3 },
      { source: "trade_bible", target: "trading_system", strength: 0.35 },

      { source: "cat_trade", target: "signal_bot", strength: 0.45 },
      { source: "cat_ai", target: "rdog", strength: 0.5 },
      { source: "signal_bot", target: "telegram", strength: 0.35 },
      { source: "signal_bot", target: "github", strength: 0.3 },
      { source: "rdog", target: "obsidian", strength: 0.35 },
    ];

    const statusColor = status => {
      if (/âœ…|å®Œæˆ|ç©©å®š/.test(status)) return "#3dff89";
      if (/ğŸ”„|æŒçºŒ|é€²è¡Œ/.test(status)) return "#00d4ff";
      if (/â¸|ç­‰å¾…|é˜»å¡/.test(status)) return "#ffcc66";
      if (/ğŸ“‹|è¨ˆåŠƒ|è‰ç¨¿|è¦åŠƒ/.test(status)) return "#ff8b5a";
      return "#9cc4ff";
    };

    const statusSimple = s => {
      if (/âœ…|å®Œæˆ|ç©©å®š/.test(s)) return "å·²å®Œæˆ";
      if (/ğŸ”„|æŒçºŒ|é€²è¡Œ/.test(s)) return "é€²è¡Œä¸­";
      if (/â¸|ç­‰å¾…|é˜»å¡/.test(s)) return "æš«åœä¸­";
      if (/ğŸ“‹|è¨ˆåŠƒ|è‰ç¨¿|è¦åŠƒ/.test(s)) return "è¦åŠƒä¸­";
      return "å…¶ä»–";
    };

    const layerLabel = {
      center: "ä¸­å¿ƒ",
      category: "åˆ†é¡",
      project: "å°ˆæ¡ˆ",
      infra: "åŸºç¤è¨­æ–½"
    };

    const sidebar = d3.select("#sidebar");
    const tooltip = d3.select("#tooltip");

    function renderSidebar(node) {
      if (!node) {
        sidebar.html(`
          <h2>ç¯€é»è©³ç´°è³‡è¨Š</h2>
          <p class="hint">è«‹é»æ“Šä¸»åœ–ä»»ä¸€ç¯€é»ï¼Œé€™è£¡æœƒé¡¯ç¤ºè©²å°ˆæ¡ˆ/çŸ¥è­˜å±¤çš„ç´°ç¯€ã€é—œéµæŒ‡æ¨™èˆ‡é—œè¯è³‡è¨Šã€‚</p>
        `);
        return;
      }

      const metrics = node.metrics
        ? Object.entries(node.metrics)
            .map(([k, v]) => `<li><span>${k}</span><strong>${v}</strong></li>`)
            .join("")
        : `<li><span>é‡é»</span><strong>æŒçºŒè¿½è¹¤ä¸­</strong></li>`;

      const tags = (node.tags || []).map(t => `<span class="tag">${t}</span>`).join("");
      const link = node.link ? `<a class="link-btn" href="${node.link}" target="_blank" rel="noopener">é–‹å•Ÿç›¸é—œé€£çµ</a>` : "";
      const childrenHtml = (node.children && node.children.length)
        ? `<h3 class="section-title">åŒ…å«é …ç›®</h3><ul class="kv">${node.children.map(c => `<li>${c}</li>`).join("")}</ul>`
        : "";

      sidebar.html(`
        <h2>${node.name}</h2>
        <span class="status-badge" style="border-color:${statusColor(node.status)}66;color:${statusColor(node.status)}">${node.status}</span>
        <p class="desc">${node.desc || "ç„¡è£œå……æè¿°"}</p>

        <h3 class="section-title">é—œéµæŒ‡æ¨™</h3>
        <ul class="kv">${metrics}</ul>

        ${childrenHtml}

        <h3 class="section-title">åˆ†é¡èˆ‡æ¨™ç±¤</h3>
        <div class="tags">
          <span class="tag">${layerLabel[node.layer] || node.layer}</span>
          ${tags}
        </div>
        ${link}
      `);
    }

    function buildStats() {
      const projects = nodes.filter(d => d.layer === "project");
      const running = projects.filter(d => /ğŸ”„|æŒçºŒ|ç©©å®š|é€²è¡Œ/.test(d.status));

      d3.select("#nodeCount").text(nodes.length);
      d3.select("#projectCount").text(projects.length);
      d3.select("#activeCount").text(running.length);

      // Stats panel sub-label
      d3.select("#statsPanel .metric:first-child .sub").text("åˆ†é¡ + å°ˆæ¡ˆ + åŸºç¤è¨­æ–½");

      const statusBuckets = d3.rollups(projects, v => v.length, d => statusSimple(d.status));
      const total = projects.length;
      const statusOrder = ["å·²å®Œæˆ", "é€²è¡Œä¸­", "æš«åœä¸­", "è¦åŠƒä¸­", "å…¶ä»–"];
      const barColor = {
        "å·²å®Œæˆ": "#3dff89",
        "é€²è¡Œä¸­": "#00d4ff",
        "æš«åœä¸­": "#ffcc66",
        "è¦åŠƒä¸­": "#ff8b5a",
        "å…¶ä»–": "#9cc4ff"
      };

      const map = new Map(statusBuckets);
      const bars = statusOrder.map(k => [k, map.get(k) || 0]).filter(([, v]) => v > 0);
      const barWrap = d3.select("#statusBars");

      barWrap.selectAll(".bar-row")
        .data(bars)
        .join("div")
        .attr("class", "bar-row")
        .html(([k, v]) => {
          const pct = ((v / total) * 100).toFixed(0);
          return `
            <div>${k}</div>
            <div class="bar-track">
              <div class="bar-fill" style="--w:${pct}%;color:${barColor[k]};background:${barColor[k]}"></div>
            </div>
            <div>${v}</div>
          `;
        });

      const capsules = [
        ["å°ˆæ¡ˆç¸½æ•¸", projects.length],
        ["å·²å®Œæˆ", map.get("å·²å®Œæˆ") || 0],
        ["é€²è¡Œä¸­", map.get("é€²è¡Œä¸­") || 0],
        ["è¦åŠƒ/è‰ç¨¿", (map.get("è¦åŠƒä¸­") || 0) + (map.get("å…¶ä»–") || 0)]
      ];

      d3.select("#capsules").selectAll("div")
        .data(capsules)
        .join("div")
        .attr("class", "capsule")
        .html(([k, v]) => `${k}<strong>${v}</strong>`);
    }

    function buildLegend() {
      const items = [
        ["ä¸­å¿ƒ", palette.center],
        ["åˆ†é¡", palette.category],
        ["å°ˆæ¡ˆ", palette.project],
        ["åŸºç¤è¨­æ–½", palette.infra]
      ];

      d3.select("#legend")
        .selectAll("div")
        .data(items)
        .join("div")
        .attr("class", "legend-item")
        .html(([name, c]) => `<span class="dot" style="background:${c};color:${c}"></span>${name}`);
    }

    function nodeRadius(d) {
      if (d.layer === "center") return 26;
      return Math.max(7, d.importance * 0.5);
    }

    function drawGraph(filterLayer = "all") {
      const svg = d3.select("#graph");
      svg.selectAll("*").remove();

      const { width, height } = svg.node().getBoundingClientRect();
      svg.attr("viewBox", [0, 0, width, height]);

      const shownNodes = nodes.filter(n => filterLayer === "all" || n.layer === filterLayer || n.id === "core");
      const nodeSet = new Set(shownNodes.map(n => n.id));
      const shownLinks = links.filter(l => nodeSet.has(l.source) && nodeSet.has(l.target));

      const g = svg.append("g");
      const glow = svg.append("defs")
        .append("filter")
        .attr("id", "glow");

      glow.append("feGaussianBlur")
        .attr("stdDeviation", "3.5")
        .attr("result", "blur");

      glow.append("feMerge")
        .selectAll("feMergeNode")
        .data(["blur", "SourceGraphic"])
        .join("feMergeNode")
        .attr("in", d => d);

      const link = g.append("g")
        .attr("stroke", "var(--line)")
        .attr("stroke-opacity", 0.85)
        .selectAll("line")
        .data(shownLinks)
        .join("line")
        .attr("stroke-width", d => 0.6 + d.strength * 2.1)
        .attr("stroke-linecap", "round");

      const node = g.append("g")
        .selectAll("g")
        .data(shownNodes)
        .join("g")
        .style("cursor", "pointer");

      node.append("circle")
        .attr("r", d => nodeRadius(d))
        .attr("fill", d => palette[d.layer])
        .attr("fill-opacity", d => (d.layer === "sub" ? 0.8 : 0.92))
        .attr("stroke", "#d8efff")
        .attr("stroke-width", d => (d.layer === "center" ? 1.7 : 1))
        .attr("filter", "url(#glow)");

      node.append("text")
        .text(d => d.name)
        .attr("text-anchor", "middle")
        .attr("dy", d => -nodeRadius(d) - 6)
        .attr("fill", "#d9ecff")
        .attr("font-size", d => d.layer === "center" ? 13 : 11)
        .attr("font-weight", d => d.layer === "project" || d.layer === "center" ? 700 : 500)
        .attr("paint-order", "stroke")
        .attr("stroke", "rgba(2,8,18,0.9)")
        .attr("stroke-width", 2.8);

      const simulation = d3.forceSimulation(shownNodes)
        .force("link", d3.forceLink(shownLinks).id(d => d.id).distance(d => 55 + (1 - d.strength) * 90))
        .force("charge", d3.forceManyBody().strength(d => (d.layer === "center" ? -780 : -320)))
        .force("collision", d3.forceCollide().radius(d => nodeRadius(d) + 8).strength(1))
        .force("center", d3.forceCenter(width / 2, height / 2))
        .force("x", d3.forceX(width / 2).strength(0.03))
        .force("y", d3.forceY(height / 2).strength(0.03));

      simulation.on("tick", () => {
        link
          .attr("x1", d => d.source.x)
          .attr("y1", d => d.source.y)
          .attr("x2", d => d.target.x)
          .attr("y2", d => d.target.y);

        node.attr("transform", d => `translate(${d.x},${d.y})`);
      });

      const drag = d3.drag()
        .on("start", (event, d) => {
          if (!event.active) simulation.alphaTarget(0.25).restart();
          d.fx = d.x;
          d.fy = d.y;
        })
        .on("drag", (event, d) => {
          d.fx = event.x;
          d.fy = event.y;
        })
        .on("end", (event, d) => {
          if (!event.active) simulation.alphaTarget(0);
          d.fx = null;
          d.fy = null;
        });

      node.call(drag)
        .on("click", (_, d) => {
          renderSidebar(d);
          node.select("circle")
            .attr("stroke", p => p.id === d.id ? "#ffffff" : "#d8efff")
            .attr("stroke-width", p => p.id === d.id ? 2.4 : (p.layer === "center" ? 1.7 : 1));
        })
        .on("mouseenter", (event, d) => {
          link.attr("stroke", l => (l.source.id === d.id || l.target.id === d.id) ? "var(--line-strong)" : "var(--line)");
          tooltip
            .style("opacity", 1)
            .style("transform", "translateY(0)")
            .html(`<strong>${d.name}</strong><br>${d.status}<br>${layerLabel[d.layer] || d.layer}`);
        })
        .on("mousemove", event => {
          tooltip
            .style("left", `${event.clientX + 14}px`)
            .style("top", `${event.clientY + 14}px`);
        })
        .on("mouseleave", () => {
          link.attr("stroke", "var(--line)");
          tooltip.style("opacity", 0).style("transform", "translateY(6px)");
        });

      const zoom = d3.zoom()
        .scaleExtent([0.35, 2.6])
        .on("zoom", event => g.attr("transform", event.transform));

      svg.call(zoom);
    }

    function initFilters() {
      const options = [
        ["all", "å…¨éƒ¨"],
        ["category", "åˆ†é¡ç¸½è¦½"],
        ["project", "å°ˆæ¡ˆ"],
        ["infra", "åŸºç¤è¨­æ–½"]
      ];

      let active = "all";
      const wrap = d3.select("#filters");

      wrap.selectAll("button")
        .data(options)
        .join("button")
        .attr("class", d => `chip ${d[0] === active ? "active" : ""}`)
        .text(d => d[1])
        .on("click", function(_, d) {
          active = d[0];
          wrap.selectAll(".chip").classed("active", p => p[0] === active);
          drawGraph(active);
        });
    }

    function boot() {
      buildStats();
      buildLegend();
      initFilters();
      drawGraph();
      renderSidebar(nodes[0]);

      let resizeTimer;
      window.addEventListener("resize", () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => drawGraph(d3.select("#filters .chip.active").datum()?.[0] || "all"), 180);
      });
    }

    boot();
  </script>
</body>
</html>
